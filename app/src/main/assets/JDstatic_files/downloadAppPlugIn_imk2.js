(function(){var U=navigator.userAgent;var ae=U.match(/Chrome/i)!=null&&U.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i)==null?true:false;var af=(U.match(/(Android);?[\s\/]+([\d.]+)?/))?true:false;var a=(U.match(/(iPad).*OS\s([\d_]+)/))?true:false;var X=(U.match(/(Mac\sOS)\sX\s([\d_]+)/))?true:false;var A=(!a&&U.match(/(iPhone\sOS)\s([\d_]+)/))?true:false;var h=(A||a)&&U.match(/Safari/);var E=U.match(/MQQBrowser\/([\d\.]+)/)?true:false;var w=U.match(/UCBrowser\/([\d\.]+)/)?true:false;var ac=0;h&&(ac=U.match(/Version\/([\d\.]+)/));try{ac=parseFloat(ac[1],10)}catch(ag){}var U=window.navigator.userAgent,Z=false;var Z=U.toUpperCase().indexOf("SAMSUNG-SM-N7508V")!=-1;var q=false;var B="plugIn_downloadAppPlugIn_loadIframe";var C=false;var p=0;var Q={};var b={};var k=null;var ab={};var F=window.Zepto||window.jQuery?true:false;var n=[];var G=window.localStorage?true:false;var y="mdownloadAppPlugInskip";var z=null;var d=Math.floor(Math.random()*100)+1;var l=null;var c=false;var u=false;var N={closeUaAjax:false,keplerAjax:false,configCenterAjax:false};var f={AROUSAL_APP:true,DOWNLOAD_LAYER:true,GENERAL_HEAD:true};var t={url:"https://mapi.m.jd.com/config/display.action?_format_=json&domain="+document.referrer,method:"POST",async:false,timeout:1000,withCredentials:true,hasAjax:"configCenterAjax",hasAjaxSend:false,error:function(){N.configCenterAjax=true},success:function(e){N.configCenterAjax=true;e=JSON.parse(e);if(e&&e.data){for(var aj=0;aj<e.data.length;aj++){var ai=e.data[aj];if(ai.compent&&!ai.display&&f.hasOwnProperty(ai.compent)){f[ai.compent]=ai.display}}}}};var M={url:"https://so.m.jd.com/downLoad/closeUa.action?_format_=json",method:"POST",async:false,timeout:1000,hasAjax:"closeUaAjax",hasAjaxSend:false,error:function(){N.closeUaAjax=true},success:function(e){N.closeUaAjax=true;e=JSON.parse(e);L(e)}};var ah={url:"https://mapi.m.jd.com/keple/getKepleData.action?_format_=json",method:"POST",async:true,timeout:1000,withCredentials:true,hasAjax:"keplerAjax",hasAjaxSend:false,error:function(){l='{"source":"m-base","otherData":{},"channel":"m-arouse"}';N.keplerAjax=true},success:function(e){var ai=JSON.parse(e);if(ai&&ai.data){if(!ai.data.source&&!ai.data.channel){ai.data.source="m-base";ai.data.channel="m-arouse"}l=JSON.stringify(ai.data)}else{l='{"source":"m-base","otherData":{},"channel":"m-arouse"}'}N.keplerAjax=true}};function s(){var ai=new Date();var aj=ai.getFullYear();var ak=ai.getMonth()+1;var e=ai.getDate();strDate=aj+"-"+ak+"-"+e;return strDate}function i(aj,ai,e){if(F){k("#"+aj).bind(ai,e)}else{k("#"+aj).addEventListener(ai,e,!1)}}function O(e){var ai=(e||"mGen")+(++p);return ai}if(F){k=window.$;ab=window.$}else{k=function(e){if(typeof e=="object"){return e}return document.querySelector(e)};if(!window.$){window.$=ab=k}else{ab=window.$}}window.onblur=function(){for(var e=0;e<n.length;e++){clearTimeout(n[e])}};function j(aj){var ai=document.cookie.indexOf(aj+"=");if(ai==-1){return""}ai=ai+aj.length+1;var e=document.cookie.indexOf(";",ai);if(e==-1){e=document.cookie.length}return document.cookie.substring(ai,e)}function r(aj,al,e,am,ak){var an=aj+"="+escape(al);if(e!=""){var ai=new Date();ai.setTime(ai.getTime()+e*24*3600*1000);an+=";expires="+ai.toGMTString()}if(am!=""){an+=";path="+am}if(ak!=""){an+=";domain="+ak}document.cookie=an}function V(aj,am){var al=null;if(am){al={downAppURl:"//h5.m.jd.com/active/download/download.html?channel=jd-m",downAppIos:"https://itunes.apple.com/us/app/jing-dong-wang-gou-shou-dan/id414245413",downWeixin:"http://a.app.qq.com/o/simple.jsp?pkgname=com.jingdong.app.mall&g_f=991850",downIpad:"https://itunes.apple.com/cn/app/jing-dong-hd/id434374726?mt=8",inteneUrl:"openapp.jdmobile://virtual?",inteneUrlParams:null,sourceType:"JSHOP_SOURCE_TYPE",sourceValue:"JSHOP_SOURCE_VALUE",M_sourceFrom:"mxz",NoJumpDownLoadPage:false,kepler_param:null,autoOpenAppEventId:"MDownLoadFloat_AppArouse",autoOpenAppEventParam:"",autoOpenIntervalTime:0,cookieFlag:null}}else{al={downAppURl:"//h5.m.jd.com/active/download/download.html?channel=jd-m",downAppIos:"https://itunes.apple.com/us/app/jing-dong-wang-gou-shou-dan/id414245413",downWeixin:"http://a.app.qq.com/o/simple.jsp?pkgname=com.jingdong.app.mall&g_f=991850",downIpad:"https://itunes.apple.com/cn/app/jing-dong-hd/id434374726?mt=8",inteneUrl:"openapp.jdmobile://virtual?",inteneUrlParams:null,openAppBtnId:"",closePanelBtnId:"",closePanelId:"",openAppCallback:null,openAppCallbackSource:null,closeCallblack:null,closeCallblackSource:null,cookieFlag:null,noRecord:false,sourceType:"JSHOP_SOURCE_TYPE",sourceValue:"JSHOP_SOURCE_VALUE",openAppEventId:"MDownLoadFloat_OpenNow",openAppEventParam:"",closePanelEventId:"MDownLoadFloat_Close",closePanelEventParam:"",appDownCloseIntervalTime:259200000,appDownOpenIntervalTime:2592000000,isnotWriteOpenAppCookie:false,M_sourceFrom:"mxz",NoJumpDownLoadPage:false,kepler_param:null}}if(aj){for(var ak in aj){if(ak&&aj[ak]){if(ak=="appDownCloseIntervalTime"||ak=="appDownOpenIntervalTime"){var ao=/^(-     |\+)?\d+$/;if(ao.test(aj[ak])&&aj[ak]>0){try{var ai=parseInt(aj[ak],10);al[ak]=ai}catch(an){}}}else{al[ak]=aj[ak]}}}}return al}function H(e){var al=m(e);var ai=null;if(a){ai=e.downIpad}else{if(A){ai=e.downAppIos}else{ai=e.downAppURl}}if(ae){if(af){var ak=al;al=K(ak);setTimeout(function(){window.location.href=al},50)}}if((h&&ac>=9)||X||Z){setTimeout(function(){var am=document.createElement("a");am.setAttribute("href",al),am.style.display="none",document.body.appendChild(am);var an=document.createEvent("HTMLEvents");an.initEvent("click",!1,!1),am.dispatchEvent(an)},0)}else{document.querySelector("#"+B).src=al}if(!e.NoJumpDownLoadPage){var aj=Date.now();setTimeout(function(){var am=setTimeout(function(){I(aj,ai)},1500);n.push(am)},100)}}function I(aj,ai){var e=Date.now();if(aj&&(e-aj)<(1500+200)){window.location.href=ai}}function m(ak){var au=[];var an=ak.inteneUrlParams;var ar={category:"jump",des:"HomePage"};if(ak.sourceType&&ak.sourceValue){ar.sourceType=ak.sourceType;ar.sourceValue=ak.sourceValue;if(an&&!an.sourceType&&!an.sourceValue){an.sourceType=ak.sourceType;an.sourceValue=ak.sourceValue}if(ak&&ak.M_sourceFrom){ar.M_sourceFrom=ak.M_sourceFrom;if(an){an.M_sourceFrom=ak.M_sourceFrom}}}if(an){for(var at in an){if(at&&an[at]){au.push('"'+at+'":"'+an[at]+'"')}}}else{for(var at in ar){if(at&&ar[at]){au.push('"'+at+'":"'+ar[at]+'"')}}}au.push('"kepler_param":'+l);try{var ao=MPing.EventSeries.getSeries();if(ao){var av=JSON.parse(ao);av.jdv=encodeURIComponent(j("__jdv"));av.unpl=encodeURIComponent(j("unpl"));av.mt_xid=encodeURIComponent(j("mt_xid"));av.mt_subsite=encodeURIComponent(j("mt_subsite"))}var aq={mt_subsite:encodeURIComponent(j("mt_subsite")),__jdv:encodeURIComponent(j("__jdv")),unpl:encodeURIComponent(j("unpl")),__jda:encodeURIComponent(j("__jda"))};ao=JSON.stringify(av);au.push('"m_param":'+ao);au.push('"SE":'+JSON.stringify(aq))}catch(ap){au.push('"m_param":null')}var aj="{"+au.join(",")+"}";var am=ak.inteneUrl.split("?");var ai=null;if(am.length==2){ai=am[0]+"?"+am[1]+"&params="+aj}else{ai=am[0]+"?params="+aj}var al={url:"//ccc-x.jd.com/dsp/op?openapp_url="+encodeURI(aj)+"&openapp_source_type=100",method:"POST",async:false,timeout:1000,error:function(){},success:function(e){}};J(al);return ai}function K(e){return"intent://m.jd.com/#Intent;scheme="+e+";package=com.jingdong.app.mall;end"}function v(e){if(e.openAppBtnId&&document.querySelector("#"+e.openAppBtnId)){Q[e.openAppBtnId]=e;Y(e.openAppBtnId,e.openAppEventId,e.openAppEventParam);i(e.openAppBtnId,"click",function(){var am=this.getAttribute("id");var ai=Q[am];if(!C){var ak=document.createElement("iframe");ak.id=B;document.body.appendChild(ak);document.getElementById(B).style.display="none";document.getElementById(B).style.width="0px";document.getElementById(B).style.height="0px";C=true}if(ai.openAppCallback){var aj=ai.openAppCallbackSource?ai.openAppCallbackSource:null;ai.openAppCallback.call(aj)}var al={ajaxPrame:ah,funcList:function(an){if(!an.isnotWriteOpenAppCookie){var ao=an.cookieFlag?"downloadAppPlugIn_downCloseDate_"+an.cookieFlag:"downloadAppPlugIn_downCloseDate";r(ao,Date.now()+"_"+an.appDownOpenIntervalTime,60,"/",".m.jd.com");r(ao,Date.now()+"_"+an.appDownOpenIntervalTime,60,"/","m.jd.hk")}W(an);H(an)},funcPrame:ai};D(al)})}}function T(e){if(e.closePanelBtnId&&e.closePanelId&&document.querySelector("#"+e.closePanelId)&&document.querySelector("#"+e.closePanelBtnId)){Q[e.closePanelBtnId]=e;Y(e.closePanelBtnId,e.closePanelEventId,e.closePanelEventParam);if(P(e)){document.querySelector("#"+e.closePanelId).style.display="none";if(e.closeCallblack){var aj=event||window.event;var ai=e.closeCallblackSource?e.closeCallblackSource:null;e.closeCallblack.call(this,ai,aj)}return}else{document.querySelector("#"+e.closePanelId).style.display="block"}i(e.closePanelBtnId,"click",function(){var ao=this.getAttribute("id");var ak=Q[ao];var an=ak.cookieFlag?"downloadAppPlugIn_downCloseDate_"+ak.cookieFlag:"downloadAppPlugIn_downCloseDate";if(!ak.noRecord){r(an,Date.now()+"_"+ak.appDownCloseIntervalTime,60,"/","m.jd.com");r(an,Date.now()+"_"+ak.appDownCloseIntervalTime,60,"/","m.jd.hk")}document.querySelector("#"+ak.closePanelId).style.display="none";if(ak.closeCallblack){var am=event||window.event;var al=ak.closeCallblackSource?ak.closeCallblackSource:null;ak.closeCallblack.call(this,al,am)}})}}function P(aj,ap){var ak=false;var ao=null;if(ap){ao=aj.cookieFlag?"autoOpenApp_downCloseDate_"+aj.cookieFlag:"autoOpenApp_downCloseDate";if(u||!f.AROUSAL_APP){ak=true}}else{var ai=U.indexOf("jdmsxh");var al=U.indexOf("jdmsxh2");if(U.indexOf("Html5Plus")>=0||(ai>=0&&ai!=al)||c||!f.DOWNLOAD_LAYER){ak=true}ao=aj.cookieFlag?"downloadAppPlugIn_downCloseDate_"+aj.cookieFlag:"downloadAppPlugIn_downCloseDate"}var am=j(ao);var an=null;if(am){an=am.split("_");if(an.length==2){an[0]=parseInt(an[0],10);an[1]=parseInt(an[1],10)}else{an=null}}var e=Date.now();if(ak||(!aj.noRecord&&an&&an.length==2&&(e-an[0])<an[1])){ak=true}if(!ak&&ap&&aj.autoOpenIntervalTime&&aj.autoOpenIntervalTime!=0){r(ao,Date.now()+"_"+aj.autoOpenIntervalTime,60,"/",".m.jd.com");r(ao,Date.now()+"_"+aj.autoOpenIntervalTime,60,"/","m.jd.hk")}return ak}function J(aj){var ai;try{ai=new ActiveXObject("Msxml2.XMLHTTP")}catch(al){try{ai=new ActiveXObject("Microsoft.XMLHTTP")}catch(al){ai=new XMLHttpRequest()}}ai.ajaxRunError=true;if(aj.withCredentials){try{ai.withCredentials=true}catch(al){}}try{ai.open(aj.method,aj.url,aj.async);if(aj.timeout){var ak=aj.source?aj.source:null;setTimeout(function(){if(ai.ajaxRunError){ai.onreadystatechange=function(){};ai.abort();aj.error.call(ak)}},aj.timeout)}ai.onreadystatechange=function(){var am=aj.source?aj.source:null;if(ai.readyState==4){if(ai.status==200){ai.ajaxRunError=false;var e=ai.responseText;aj.success.call(am,e)}else{aj.error.call(am)}}};ai.send(null)}catch(al){}}function Y(an,ak,ai){try{var am=document.getElementById(an);var aj=am.className;if(aj){aj=aj+" J_ping"}else{aj="J_ping"}am.className=aj;am.setAttribute("report-eventid",ak);if(ai){am.setAttribute("report-eventparam",ai)}}catch(al){}}function g(ak,ai){try{var al=new MPing.inputs.Click(ak);if(ai){al.event_param=ai}var aj=new MPing();aj.send(al)}catch(am){}}function x(ai,ao,av){var aj=ao?ao:1;var ap=av?true:false;if(!P(ai)&&ai.closePanelId){var aw=document.getElementById(ai.closePanelId);if(aw){var at=aw.getBoundingClientRect();var au=at.height||at.bottom-at.top;var an=S(aw,"opacity");var ar=S(aw,"display");if(ar&&au&&ar!="none"&&au==0){ap=true}else{if(au&&an&&au==50&&an==0){ap=true}}}else{ap=true}if(aj<3&&ap==false){aj++;setTimeout(function(){x(ai,aj,ap)},2000)}}if(ap){try{var al=new MPing.inputs.Click("MDownLoadFloat_FloatShield");var am=new MPing();al.event_param=ai.openAppEventId;am.send(al);var ak={url:"//so.m.jd.com/downLoad/checkShield.action?_format_=json",method:"POST",async:true,timeout:1000,error:function(){},success:function(e){}};J(ak)}catch(aq){}}}function S(ai,e){if(ai.currentStyle){return ai.currentStyle[e]}else{return document.defaultView.getComputedStyle(ai,false)[e]}}function D(al,aj){var ak=aj?P(al.funcPrame,true):P(al.funcPrame);var e=true;if(!ak&&al&&Object.prototype.toString.apply(al.ajaxPrame)==="[object Array]"&&al.ajaxPrame.length>0){al.ajaxPrameIsArray=true;for(var ai=0;ai<al.ajaxPrame.length;ai++){if(!N[al.ajaxPrame[ai].hasAjax]){e=false;if(!al.ajaxPrame[ai].hasAjaxSend){J(al.ajaxPrame[ai]);al.ajaxPrame[ai].hasAjaxSend=true}}}}else{if(!ak&&!N[al.ajaxPrame.hasAjax]){e=false;if(!al.ajaxPrame.hasAjaxSend){J(al.ajaxPrame);al.ajaxPrame.hasAjaxSend=true}}}if(e){o(al.funcList,al.funcPrame)}else{ad(al)}}function ad(al,ai){var ak=ai?ai:0;var e=true;if(al.ajaxPrameIsArray){for(var aj=0;aj<al.ajaxPrame.length;aj++){if(!N[al.ajaxPrame[aj].hasAjax]){e=false;break}}}else{e=N[al.ajaxPrame.hasAjax]}if(al.funcList&&al.funcList.length>0){if(e){o(al.funcList,al.funcPrame)}else{setTimeout(function(){ak++;if(ak<20){ad(al,ak)}else{o(al.funcList,al.funcPrame)}},50)}}}function o(e,aj){if(e.length==1&&Object.prototype.toString.apply(e)==="[object Function]"){e(aj)}else{for(var ai=0;ai<e.length;ai++){e[ai](aj)}}}function L(ak){if(ak&&ak.ua){ak=JSON.parse(ak.ua);if(ak&&ak.clickCloseUa){var al=ak.clickCloseUa.split("|");for(var aj=0;aj<al.length;aj++){var ai=al[aj];if(ai&&U.indexOf(ai)>=0){c=true;break}}}if(ak&&ak.autoCloseBrowser){for(var aj=0;aj<ak.autoCloseBrowser.length;aj++){var e=ak.autoCloseBrowser[aj];if(e.browser&&e.abtest&&U.indexOf(e.browser)>=0){aa(e.abtest);break}}}if(!u&&ak&&ak.autoCloseOs){for(var aj=0;aj<ak.autoCloseOs.length;aj++){var e=ak.autoCloseOs[aj];if(e.os=="IOS"&&e.abtest&&(a||A)){aa(e.abtest);break}else{if(e.os=="Android"&&e.abtest&&af){aa(e.abtest);break}}}}if(!u&&ak&&ak.autoCloseOsAndBrowser){for(var aj=0;aj<ak.autoCloseOsAndBrowser.length;aj++){var e=ak.autoCloseOsAndBrowser[aj];if(e.os&&e.browser&&e.abtest&&e.os=="IOS"&&(a||A)&&U.indexOf(e.browser)>=0){aa(e.abtest);break}if(e.os&&e.browser&&e.abtest&&e.os=="Android"&&af&&U.indexOf(e.browser)>=0){aa(e.abtest);break}}}}}function aa(e){if(e&&d<=e){u=true}}function W(e){if(e&&e.kepler_param){l=e.kepler_param}else{if(!l){l='{"source":"m-base","otherData":{},"channel":"m-arouse"}'}}g("MDownLoadFloat_ArouseParam",l)}function R(e){var ai=V(e);v(ai);var aj={ajaxPrame:[M,t],funcList:[T,x],funcPrame:ai};D(aj)}ab.downloadAppPlugIn=R;ab.downloadAppPlugInOpenApp=function(e){var ai=V(e,true);if(!C){var aj=document.createElement("iframe");aj.id=B;document.body.appendChild(aj);document.getElementById(B).style.display="none";document.getElementById(B).style.width="0px";document.getElementById(B).style.height="0px";C=true}var ak={ajaxPrame:[ah,M,t],funcList:function(al){if(!P(al,true)){W(al);g(al.autoOpenAppEventId,al.autoOpenAppEventParam);H(al)}},funcPrame:ai};D(ak,true)}})();